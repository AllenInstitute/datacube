<!DOCTYPE html>
<html>
<head>
    <link href="css/jheatmap-1.0.0-min.css" rel="stylesheet" type="text/css"/>

    <!-- You must include the jQuery library -->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script src="js/jheatmap-1.0.0-min.js" type="text/javascript"></script>

    <script>
        $(document).ready(function () {
            $('#heatmap').heatmap(
            {
                data: {
                    rows: new jheatmap.readers.AnnotationReader({ url: "rows.tsv" }),
                    cols: new jheatmap.readers.AnnotationReader({ url: "cols.tsv" }),
                    values: new jheatmap.readers.TableHeatmapReader({ url: "data.tsv" })
                },

                init: function (heatmap) {

                    // Selected layer
                    heatmap.cells.selectedValue = "Expression";

                    // Label to show at rows header
                    heatmap.rows.selectedValue = "symbol";

                    // Row and columns zoom
                    heatmap.cols.zoom = 3;  // width in pixels (minimum = 3)
                    heatmap.rows.zoom = 15; // height in pixels (minimum = 3)

                    // Sort columns by subtype annotation
                    heatmap.cols.sorter = new jheatmap.sorters.AnnotationSorter("subtype", true);

                    // Sort rows aggregating all the "Expression" values
                    heatmap.rows.sorter = new jheatmap.sorters.AggregationValueSorter("Expression", false, true);

                    // Column annotations
                    heatmap.cols.decorators["subtype"] = new jheatmap.decorators.CategoricalRandom();
                    heatmap.cols.annotations = ["subtype"];

                    // Rows annotations
                    heatmap.rows.decorators["fm-bias"] = new jheatmap.decorators.PValue({ cutoff: 0.05 });
                    heatmap.rows.annotations = ["fm-bias"];

                    // Aggregators
                    heatmap.cells.aggregators["Mutation"] = new jheatmap.aggregators.AbsoluteAddition();
                    heatmap.cells.aggregators["CNA Status"] = new jheatmap.aggregators.AbsoluteAddition();
                    heatmap.cells.aggregators["Expression"] = new jheatmap.aggregators.Median();

                    // Decorators
                    heatmap.cells.decorators["Mutation"] = new jheatmap.decorators.Categorical({
                                values: ["0","1"],
                                colors : ["white","green"]
                    });

                    heatmap.cells.decorators["CNA Status"] = new jheatmap.decorators.Categorical({
                                values: ["-2","2"],
                                colors : ["blue","red"]
                    });

                    heatmap.cells.decorators["Expression"] = new jheatmap.decorators.Heat({
                                minValue: -2,
                                midValue: 0,
                                maxValue: 2,
                                minColor: [85, 0, 136],
                                nullColor: [255,255,255],
                                maxColor: [255, 204, 0],
                                midColor: [240,240,240]
                    });
                }
            });
        });
    </script>
</head>
<body>
<div id="heatmap"></div>
</body>
</html>